<!DOCTYPE html>
<html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script>
    $(document).ready(function() {
        var ow = 2592.0;
        var oh = 1944.0;
        var max = 288;
        var index = 0;

        $("#left").click(function(e){
          left();
        });
        $("#right").click(function(e){
          right();
        });
        $("#image").click(function(e){
          if (e.pageX < 500) {
            left();
          } else {
            right();
          }
        });

        var imageResize = function() {
          var ww = $(window).width();
          var wh = $(window).height();
          var nw = 0.2 * ow;
          var nh = 0.2 * oh;
          for (var m = 0.3; m <= 1.0; m += 0.05) {
            var tw = ow * m;
            var th = oh * m;
            if (tw >= ww || th >= wh) {
              break;
            }
            nw = tw;
            nh = th;
          }
          $("#image").attr({
            "width": nw,
            "height": nh
          });
        };

        imageResize();

        $(window).resize(imageResize);

        $(document).keydown(function(e) {
            switch (e.which) {

                case 37: // left
                    left();
                    break;

                case 39: // right
                    right();
                    break;
            }
        });

        var left = function() {
            if (index == 0) {
                index = max - 1;
            } else {
                index -= 1;
            }
            update();
        };

        var right = function() {
            index = (index + 1) % 288;
            update();
        }

        var update = function() {
            $("#image").attr({
                "src": "/solar/images/" + index
            });
            $("#desc").html("" + index);
        };

    });
    </script>
</head>

<body>
    <div style="float: left;">
        <div>
            <img id="image" width="1000" height="562" src="/solar/images/0" />
        </div>
        <div id="desc">0</div>
        <div>
            <span id="left" style="float: left;">&#8592;</span>
            <span id="right" style="float: right;">&#8594;</span>
        </div>
    </div>
    <div></div>
</body>

</html>
